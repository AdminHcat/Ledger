{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home Ledger is a server-side fabric logging mod for modern Minecraft 1.17 and 1.18. Ledger has been written from scratch in Kotlin to solve the main issues of previous logging mods have encountered.","title":"Home"},{"location":"#home","text":"Ledger is a server-side fabric logging mod for modern Minecraft 1.17 and 1.18. Ledger has been written from scratch in Kotlin to solve the main issues of previous logging mods have encountered.","title":"Home"},{"location":"actions/","text":"Actions These are the currently logged action types: block-break block-place block-change item-insert item-remove entity-killed","title":"Actions"},{"location":"actions/#actions","text":"These are the currently logged action types: block-break block-place block-change item-insert item-remove entity-killed","title":"Actions"},{"location":"config/","text":"Configuration Ledger's configuration file is found in config/ledger.toml . It is written in TOML and can be edited in any text editor. Any changes you make to the config will be automatically updated without needing to reload or restart the server. When checking for the config for a value, it first checks the system properties, then the system environment, then the config file and finally it will use the default. For more info, read about Konf . To regenerate the config file, simply delete it. Database settings Found under [database] queueTimeoutMin [Default: 5] is the maximum amount of time to wait for the queue to drain when the server stops in minutes queueCheckDelaySec [Default: 10] is the amount of time between checking if the queue is empty when the server stops in seconds Search settings Found under [search] pageSize [Default: 8] controls the number of actions displayed per page purgePermissionLevel [Default: 4] controls the permission level required to run the purge command Message theme Found under [color] Ledger allows for the customisation of the colors used in the messages sent in game. By default, Ledger uses the blue theme. More themes can be found in the themes file Filters These allow you to control what is and is not logged Found under [actions] All listed here are arrays and are formatted like so: array = [] blocks = [ \"minecraft:air\" , \"minecraft:dirt\" ] typeBlacklist [Default: empty] controls what action types are logged. Hover over the action in a chat message to see the type worldBlacklist [Default: empty] controls in which dimensions events are logged. objectBlacklist [Default: empty] controls which objects are logged. These can be item types, block types or entities sourceBlacklist [Default: empty] controls which sources are logged. Examples are \"lava\" and \"gravity\" Default Config [database] # The maximum amount of time to wait for the queue to drain when the server stops queueTimeoutMin = 5 # The amount of time between checking if the queue is empty when the server stops queueCheckDelaySec = 10 [search] # Number of actions to show per page pageSize = 8 # Permission level for purge command purgePermissionLevel = 4 [color] # Colors in hex format primary = \"#009688\" primaryVariant = \"#52c7b8\" secondary = \"#1e88e5\" secondaryVariant = \"#6ab7ff\" light = \"#c5d6f0\" [actions] # Blacklists - blacklisted things will not be logged in the database # Example - Prevent all actions with stone or bat as the object from being logged # objectBlacklist = [ # \"minecraft:stone\", # \"minecraft:bat\" # ] # Blacklists action types. Ex: \"block-break\", \"entity-kill\" typeBlacklist = [] # Blacklists worlds/dimensions. Ex: \"mincraft:the_end\", \"minecraft:overworld\" worldBlacklist = [] # Blacklists objects (Items, Mobs, Blocks). Ex: \"minecraft:cobblestone\", \"minecraft:blaze\" objectBlacklist = [] # Blacklists sources. Ex: \"lava\", \"gravity\", \"fire\", \"fall\" sourceBlacklist = [] [networking] # This section relates to Ledger's ability to interact with client mods for ease of use # Networking is enabled by default but you can disable it here # Change to true to allow Ledger client mod packets networking = true","title":"Configuration"},{"location":"config/#configuration","text":"Ledger's configuration file is found in config/ledger.toml . It is written in TOML and can be edited in any text editor. Any changes you make to the config will be automatically updated without needing to reload or restart the server. When checking for the config for a value, it first checks the system properties, then the system environment, then the config file and finally it will use the default. For more info, read about Konf . To regenerate the config file, simply delete it.","title":"Configuration"},{"location":"config/#database-settings","text":"Found under [database] queueTimeoutMin [Default: 5] is the maximum amount of time to wait for the queue to drain when the server stops in minutes queueCheckDelaySec [Default: 10] is the amount of time between checking if the queue is empty when the server stops in seconds","title":"Database settings"},{"location":"config/#search-settings","text":"Found under [search] pageSize [Default: 8] controls the number of actions displayed per page purgePermissionLevel [Default: 4] controls the permission level required to run the purge command","title":"Search settings"},{"location":"config/#message-theme","text":"Found under [color] Ledger allows for the customisation of the colors used in the messages sent in game. By default, Ledger uses the blue theme. More themes can be found in the themes file","title":"Message theme"},{"location":"config/#filters","text":"These allow you to control what is and is not logged Found under [actions] All listed here are arrays and are formatted like so: array = [] blocks = [ \"minecraft:air\" , \"minecraft:dirt\" ] typeBlacklist [Default: empty] controls what action types are logged. Hover over the action in a chat message to see the type worldBlacklist [Default: empty] controls in which dimensions events are logged. objectBlacklist [Default: empty] controls which objects are logged. These can be item types, block types or entities sourceBlacklist [Default: empty] controls which sources are logged. Examples are \"lava\" and \"gravity\"","title":"Filters"},{"location":"config/#default-config","text":"[database] # The maximum amount of time to wait for the queue to drain when the server stops queueTimeoutMin = 5 # The amount of time between checking if the queue is empty when the server stops queueCheckDelaySec = 10 [search] # Number of actions to show per page pageSize = 8 # Permission level for purge command purgePermissionLevel = 4 [color] # Colors in hex format primary = \"#009688\" primaryVariant = \"#52c7b8\" secondary = \"#1e88e5\" secondaryVariant = \"#6ab7ff\" light = \"#c5d6f0\" [actions] # Blacklists - blacklisted things will not be logged in the database # Example - Prevent all actions with stone or bat as the object from being logged # objectBlacklist = [ # \"minecraft:stone\", # \"minecraft:bat\" # ] # Blacklists action types. Ex: \"block-break\", \"entity-kill\" typeBlacklist = [] # Blacklists worlds/dimensions. Ex: \"mincraft:the_end\", \"minecraft:overworld\" worldBlacklist = [] # Blacklists objects (Items, Mobs, Blocks). Ex: \"minecraft:cobblestone\", \"minecraft:blaze\" objectBlacklist = [] # Blacklists sources. Ex: \"lava\", \"gravity\", \"fire\", \"fall\" sourceBlacklist = [] [networking] # This section relates to Ledger's ability to interact with client mods for ease of use # Networking is enabled by default but you can disable it here # Change to true to allow Ledger client mod packets networking = true","title":"Default Config"},{"location":"install/","text":"Installation Set up a Fabric Server for 1.17 Install Fabric API Install Fabric Language Kotlin Install Ledger Run the server Adjust config as needed Run into any issues? Join our Discord for support! Other Databases Ledger supports other databases like MySQL and H2 with the help of the Ledger Databases extension. MySQL MySQL requires running a separate MySQL database and more setup than just plug and play sqlite, but can support much larger databases at faster speeds. It also supports MySQL based databases like MariaDB. MySQL support can be enabled in Ledger with the Ledger Databases extension. Once installed, enable it by adding [database_extensions] database = \"MYSQL\" url = \"\" username = \"\" password = \"\" to your ledger.toml . The url is usually something like localhost/databasename unless you are using an external database server. H2 H2 is another flat-file database like the default sqlite that may yield faster results but is more experimental. H2 support can be enabled in Ledger with the Ledger Databases extension. Once installed, enable it by adding [database_extensions] database = \"H2\" to your ledger.toml .","title":"Installation"},{"location":"install/#installation","text":"Set up a Fabric Server for 1.17 Install Fabric API Install Fabric Language Kotlin Install Ledger Run the server Adjust config as needed Run into any issues? Join our Discord for support!","title":"Installation"},{"location":"install/#other-databases","text":"Ledger supports other databases like MySQL and H2 with the help of the Ledger Databases extension.","title":"Other Databases"},{"location":"install/#mysql","text":"MySQL requires running a separate MySQL database and more setup than just plug and play sqlite, but can support much larger databases at faster speeds. It also supports MySQL based databases like MariaDB. MySQL support can be enabled in Ledger with the Ledger Databases extension. Once installed, enable it by adding [database_extensions] database = \"MYSQL\" url = \"\" username = \"\" password = \"\" to your ledger.toml . The url is usually something like localhost/databasename unless you are using an external database server.","title":"MySQL"},{"location":"install/#h2","text":"H2 is another flat-file database like the default sqlite that may yield faster results but is more experimental. H2 support can be enabled in Ledger with the Ledger Databases extension. Once installed, enable it by adding [database_extensions] database = \"H2\" to your ledger.toml .","title":"H2"},{"location":"networking/","text":"Networking Ledger supports numerous custom packets for interacting with supported client mods Versions The information on this page is applicable for Ledger Networking version 2, which is the version in Ledger versions 1.2.0 and later Packet Types The server will not respond to packets unless the player has the correct permissions, which is ledger.networking and the relevant command permission Notation Types shown here are the Java variable types. They have the equivalent value (if applicable) in Kotlin when used in Ledger's internal code Client to Server Response Once one of the c2s packets have been received, the server will send a response packet with the packet type it was responding to and the response code. See below for more information Inspect Packet Inspects a block at a given position, using the player's current dimension. This may be changed in the future Channel: ledger:inspect Buf content: Position: BlockPos Number of pages: int Return packet type: ledger.action Search Packet Channel: ledger:search Buf content: Input: String Pages: int String formatted in the same way as a /lg search command would be formatted Return packet type: ledger.action Handshake Packet Channel: ledger:handshake Buf content: Mod NBT: NbtCompound Mod NBT should contain the following: Mod Version ( version ) [ String ] : Fabric Loader user friendly string Mod ID ( modid ) [ String ] : Mod identifier of the mod Protocol version ( protocol_version ) [ int ] : Ledger protocol version Purge Packet Channel: ledger.purge Buf content: Params: String - same string as used in the search command Rollback Packet Channel: ledger.rollback Buf content: Restore: Boolean - To restore must be true, for to rollback must be false Params: String - same string as used in the search command Server to client Action Packet Represents a logged action from the database Channel: ledger:action Buf content: Position: BlockPos Type: String Dimension: Identifier Old Object: Identifier New Object: Identifier Source: String Epoch second: long Rolled back: boolean Additional NBT: String Handshake Packet Sends information about Ledger to compatible clients Channel: ledger:handshake Buf content: Protocol Version: int - Version of Ledger networking protocol. Ledger 1.1.0 and later uses version 1 Mod allowed: boolean Response Registers the server receiving a Ledger packet and contains information about what the server is doing Channel: ledger.response Packet structure Type: Identifier - Packet type being responded to Response code: int Response Codes 0 : No permission 1 : Executing command 2 : Completed command 3 : Error while executing command 4 : Cannot execute command at this time","title":"Networking"},{"location":"networking/#networking","text":"Ledger supports numerous custom packets for interacting with supported client mods","title":"Networking"},{"location":"networking/#versions","text":"The information on this page is applicable for Ledger Networking version 2, which is the version in Ledger versions 1.2.0 and later","title":"Versions"},{"location":"networking/#packet-types","text":"The server will not respond to packets unless the player has the correct permissions, which is ledger.networking and the relevant command permission","title":"Packet Types"},{"location":"networking/#notation","text":"Types shown here are the Java variable types. They have the equivalent value (if applicable) in Kotlin when used in Ledger's internal code","title":"Notation"},{"location":"networking/#client-to-server","text":"","title":"Client to Server"},{"location":"networking/#response","text":"Once one of the c2s packets have been received, the server will send a response packet with the packet type it was responding to and the response code. See below for more information","title":"Response"},{"location":"networking/#inspect-packet","text":"Inspects a block at a given position, using the player's current dimension. This may be changed in the future Channel: ledger:inspect Buf content: Position: BlockPos Number of pages: int Return packet type: ledger.action","title":"Inspect Packet"},{"location":"networking/#search-packet","text":"Channel: ledger:search Buf content: Input: String Pages: int String formatted in the same way as a /lg search command would be formatted Return packet type: ledger.action","title":"Search Packet"},{"location":"networking/#handshake-packet","text":"Channel: ledger:handshake Buf content: Mod NBT: NbtCompound Mod NBT should contain the following: Mod Version ( version ) [ String ] : Fabric Loader user friendly string Mod ID ( modid ) [ String ] : Mod identifier of the mod Protocol version ( protocol_version ) [ int ] : Ledger protocol version","title":"Handshake Packet"},{"location":"networking/#purge-packet","text":"Channel: ledger.purge Buf content: Params: String - same string as used in the search command","title":"Purge Packet"},{"location":"networking/#rollback-packet","text":"Channel: ledger.rollback Buf content: Restore: Boolean - To restore must be true, for to rollback must be false Params: String - same string as used in the search command","title":"Rollback Packet"},{"location":"networking/#server-to-client","text":"","title":"Server to client"},{"location":"networking/#action-packet","text":"Represents a logged action from the database Channel: ledger:action Buf content: Position: BlockPos Type: String Dimension: Identifier Old Object: Identifier New Object: Identifier Source: String Epoch second: long Rolled back: boolean Additional NBT: String","title":"Action Packet"},{"location":"networking/#handshake-packet_1","text":"Sends information about Ledger to compatible clients Channel: ledger:handshake Buf content: Protocol Version: int - Version of Ledger networking protocol. Ledger 1.1.0 and later uses version 1 Mod allowed: boolean","title":"Handshake Packet"},{"location":"networking/#response_1","text":"Registers the server receiving a Ledger packet and contains information about what the server is doing Channel: ledger.response","title":"Response"},{"location":"networking/#packet-structure","text":"Type: Identifier - Packet type being responded to Response code: int","title":"Packet structure"},{"location":"networking/#response-codes","text":"0 : No permission 1 : Executing command 2 : Completed command 3 : Error while executing command 4 : Cannot execute command at this time","title":"Response Codes"},{"location":"parameters/","text":"Parameters Parameters are used in many commands such as search and preview . They allow you to refine your selection, so you only get the actions you want. Currently, there are 7 different parameters which can be found below. Action Key - action: Value - Action Identifier Multiple Allowed - Yes Negative allowed - Yes Example - action:block-break This parameter allows you to filter your selection based on the action type . An Action Identifier is a string with the group and type divided by a - . Dimension Key - world: Value - World Identifier Negative Allowed - Yes Multiple Allowed - Yes Example - world:minecraft:the_end This parameter allows you to filter your selection based on the dimension. An identifier is Minecraft's ID system of a namespace and a path divided by : . Object Key - object: Value - Object Identifier Negative Allowed - Yes Multiple Allowed - Yes Example - object:minecraft:stone This parameter allows you to filter your selection based on the object. An object is ledger's name for an identifier that could be a block, item or entity. An identifier is Minecraft's ID system of a namespace and a path divided by : . Range Key - range: Value - Integer > 1 Negative Allowed - No Multiple Allowed - No Example - range:5 This parameter allows you to filter your selection based on your location. This will not filter by your dimension, so you may still get results from other worlds. Use the dimension parameter to filter by world. Source Key - source: Value - Source Name Negative Allowed - Yes Multiple Allowed - Yes Example - source:Potatoboy9999 source:@tnt This parameter allows you to filter your selection based on the source of the action. To filter based on a specific player, simply use that players name. To filter based on any other source, you must use an @ symbol. Time Before Key - before: Value - Time Duration Negative Allowed - No Multiple Allowed - No Example - before:3h After Key - after: Value - Time Duration Negative Allowed - No Multiple Allowed - No Example - after:3h These parameters allow you to filter your selection based on time. It will select actions within the duration specified. You can specify durations with s econd, m inute, h our, d ay and w eek. You can also combine multiple durations for example 7w4d31m42s . The after parameter is the same as the time parameter in older versions. The before parameter selects all results before the point in time that was the provided, and after that point for after . An easy way to remember the difference between before:1d and after:1d is to think about it like this. If you go back in time 1 day, do you want everything that happened before then or after then. Usually you want after .","title":"Parameters"},{"location":"parameters/#parameters","text":"Parameters are used in many commands such as search and preview . They allow you to refine your selection, so you only get the actions you want. Currently, there are 7 different parameters which can be found below.","title":"Parameters"},{"location":"parameters/#action","text":"Key - action: Value - Action Identifier Multiple Allowed - Yes Negative allowed - Yes Example - action:block-break This parameter allows you to filter your selection based on the action type . An Action Identifier is a string with the group and type divided by a - .","title":"Action"},{"location":"parameters/#dimension","text":"Key - world: Value - World Identifier Negative Allowed - Yes Multiple Allowed - Yes Example - world:minecraft:the_end This parameter allows you to filter your selection based on the dimension. An identifier is Minecraft's ID system of a namespace and a path divided by : .","title":"Dimension"},{"location":"parameters/#object","text":"Key - object: Value - Object Identifier Negative Allowed - Yes Multiple Allowed - Yes Example - object:minecraft:stone This parameter allows you to filter your selection based on the object. An object is ledger's name for an identifier that could be a block, item or entity. An identifier is Minecraft's ID system of a namespace and a path divided by : .","title":"Object"},{"location":"parameters/#range","text":"Key - range: Value - Integer > 1 Negative Allowed - No Multiple Allowed - No Example - range:5 This parameter allows you to filter your selection based on your location. This will not filter by your dimension, so you may still get results from other worlds. Use the dimension parameter to filter by world.","title":"Range"},{"location":"parameters/#source","text":"Key - source: Value - Source Name Negative Allowed - Yes Multiple Allowed - Yes Example - source:Potatoboy9999 source:@tnt This parameter allows you to filter your selection based on the source of the action. To filter based on a specific player, simply use that players name. To filter based on any other source, you must use an @ symbol.","title":"Source"},{"location":"parameters/#time","text":"","title":"Time"},{"location":"parameters/#before","text":"Key - before: Value - Time Duration Negative Allowed - No Multiple Allowed - No Example - before:3h","title":"Before"},{"location":"parameters/#after","text":"Key - after: Value - Time Duration Negative Allowed - No Multiple Allowed - No Example - after:3h These parameters allow you to filter your selection based on time. It will select actions within the duration specified. You can specify durations with s econd, m inute, h our, d ay and w eek. You can also combine multiple durations for example 7w4d31m42s . The after parameter is the same as the time parameter in older versions. The before parameter selects all results before the point in time that was the provided, and after that point for after . An easy way to remember the difference between before:1d and after:1d is to think about it like this. If you go back in time 1 day, do you want everything that happened before then or after then. Usually you want after .","title":"After"},{"location":"queue/","text":"Queue Whenever an action happens, it is added to the database queue. Often, the queue will be empty, and it will be instantly inserted into the database. If there is lots of players or something like an explosion creating lots of actions, the queue may fill up and it could take a while for actions to be logged. You can see the status of your database queue by using the status command . If the server stops while there is still actions in the queue that need to be logged, it will force the server to wait until it is finished logging the actions or until it times out. You can adjust the timeout in the config","title":"Queue"},{"location":"queue/#queue","text":"Whenever an action happens, it is added to the database queue. Often, the queue will be empty, and it will be instantly inserted into the database. If there is lots of players or something like an explosion creating lots of actions, the queue may fill up and it could take a while for actions to be logged. You can see the status of your database queue by using the status command . If the server stops while there is still actions in the queue that need to be logged, it will force the server to wait until it is finished logging the actions or until it times out. You can adjust the timeout in the config","title":"Queue"},{"location":"themes/","text":"Ledger Chat Themes This is a list of preset themes for your Ledger messages. Copy/paste the block into your color section to use Default blue [color] # Colors in hex format primary = \"#009688\" primaryVariant = \"#52c7b8\" secondary = \"#1e88e5\" secondaryVariant = \"#6ab7ff\" light = \"#c5d6f0\" Red [color] # Colors in hex format primary = \"#A4243B\" primaryVariant = \"#C8973C\" secondary = \"#BD632F\" secondaryVariant = \"#D8C99B\" light = \"#ccc8c8\" Green [color] # Colors in hex format primary = \"#2A993F\" primaryVariant = \"#b0c196\" secondary = \"#20D44D\" secondaryVariant = \"#279639\" light = \"#c9c9c9\"","title":"Themes"},{"location":"themes/#ledger-chat-themes","text":"This is a list of preset themes for your Ledger messages. Copy/paste the block into your color section to use","title":"Ledger Chat Themes"},{"location":"themes/#default-blue","text":"[color] # Colors in hex format primary = \"#009688\" primaryVariant = \"#52c7b8\" secondary = \"#1e88e5\" secondaryVariant = \"#6ab7ff\" light = \"#c5d6f0\"","title":"Default blue"},{"location":"themes/#red","text":"[color] # Colors in hex format primary = \"#A4243B\" primaryVariant = \"#C8973C\" secondary = \"#BD632F\" secondaryVariant = \"#D8C99B\" light = \"#ccc8c8\"","title":"Red"},{"location":"themes/#green","text":"[color] # Colors in hex format primary = \"#2A993F\" primaryVariant = \"#b0c196\" secondary = \"#20D44D\" secondaryVariant = \"#279639\" light = \"#c9c9c9\"","title":"Green"},{"location":"translations/","text":"Translations Ledger currently supports many languages. The language used is based on the clients selected language and defaults to en_us if it doesn't support the clients language. Supported Languages en_us nl_nl ru_ru zn_cn Contributing You can contribute support for a new language or improve an old one by submitting a pull request to the data/ledger/lang folder.","title":"Translations"},{"location":"translations/#translations","text":"Ledger currently supports many languages. The language used is based on the clients selected language and defaults to en_us if it doesn't support the clients language.","title":"Translations"},{"location":"translations/#supported-languages","text":"en_us nl_nl ru_ru zn_cn","title":"Supported Languages"},{"location":"translations/#contributing","text":"You can contribute support for a new language or improve an old one by submitting a pull request to the data/ledger/lang folder.","title":"Contributing"},{"location":"api/extension_development/","text":"Developing Extensions Extensions provide an easy way to add your own functionality to Ledger Note The docs shown here have Kotlin code, but you can write your extension in Java should you wish Set up project Set up your mod environment as usual Publish Ledger to mavenLocal Add the following to your build.gradle : modImplementation ( include ( \"com.github.quiltservertools:ledger:LATEST_LEDGER_VERSION\" )) Creating your extension object Extension : DatabaseExtension { override fun getDatabase ( server : MinecraftServer ): Database { TODO ( \"Tutorial\" ) } override fun getIdentifier (): Identifier { TODO ( \"Tutorial\" ) } override fun getConfigSpecs (): List < ConfigSpec > { return ArrayList () } } We now need to fill out the methods. getDatabase : Returns an Exposed Database object. This is how you add new database types to Ledger getIdentifier : Should return a new Identifier(YOUR_MODID, DATABASE_TYPE) object. Register extension In the entrypoint of your mod, add the relevant call to ExtensionManager#registerExtension object MyMod : ModInitializer { override fun onInitialize () { ExtensionManager . registerExtension ( Extension ) } } It's as simple as that Command extension Create a command class: object MyLedgerSubCommand : BuildableCommand { override fun build (): LiteralCommandNode < ServerCommandSource > { return CommandManager . literal ( \"subcommand\" ) . executes { ctx . source . sendFeedback ( LiteralText ( \"Subcommand run\" ), false ) } } } Now you create your extension class and register it like shown above object Extension : CommandExtension { fun registerSubcommands (): List < BuildableCommand > { val list = mutableListOf < BuildableCommand > () list . add ( MyLedgerSubCommand ) return list } override fun getConfigSpecs (): List < ConfigSpec > { return ArrayList () } } Config specs Ledger uses the Konf library for configuration. You can add your own config specs to Ledger's file if your extension needs it Create a config spec: object ExtensionSpec : ConfigSpec () { val myProperty by optional ( true ) val myRequiredProperty by required < Boolean > () } Add the relevant line to your config file: # Config file above [extension] myProperty = false myRequiredProperty = true You should make all properties optional unless your extension cannot function without a value. This is because existing config files will not have these values automatically added. Register your spec: override fun getConfigSpecs (): List < ConfigSpec > { return listOf ( ExtensionSpec ) }","title":"Developing Extensions"},{"location":"api/extension_development/#developing-extensions","text":"Extensions provide an easy way to add your own functionality to Ledger","title":"Developing Extensions"},{"location":"api/extension_development/#note","text":"The docs shown here have Kotlin code, but you can write your extension in Java should you wish","title":"Note"},{"location":"api/extension_development/#set-up-project","text":"Set up your mod environment as usual Publish Ledger to mavenLocal Add the following to your build.gradle : modImplementation ( include ( \"com.github.quiltservertools:ledger:LATEST_LEDGER_VERSION\" ))","title":"Set up project"},{"location":"api/extension_development/#creating-your-extension","text":"object Extension : DatabaseExtension { override fun getDatabase ( server : MinecraftServer ): Database { TODO ( \"Tutorial\" ) } override fun getIdentifier (): Identifier { TODO ( \"Tutorial\" ) } override fun getConfigSpecs (): List < ConfigSpec > { return ArrayList () } } We now need to fill out the methods. getDatabase : Returns an Exposed Database object. This is how you add new database types to Ledger getIdentifier : Should return a new Identifier(YOUR_MODID, DATABASE_TYPE) object.","title":"Creating your extension"},{"location":"api/extension_development/#register-extension","text":"In the entrypoint of your mod, add the relevant call to ExtensionManager#registerExtension object MyMod : ModInitializer { override fun onInitialize () { ExtensionManager . registerExtension ( Extension ) } } It's as simple as that","title":"Register extension"},{"location":"api/extension_development/#command-extension","text":"Create a command class: object MyLedgerSubCommand : BuildableCommand { override fun build (): LiteralCommandNode < ServerCommandSource > { return CommandManager . literal ( \"subcommand\" ) . executes { ctx . source . sendFeedback ( LiteralText ( \"Subcommand run\" ), false ) } } } Now you create your extension class and register it like shown above object Extension : CommandExtension { fun registerSubcommands (): List < BuildableCommand > { val list = mutableListOf < BuildableCommand > () list . add ( MyLedgerSubCommand ) return list } override fun getConfigSpecs (): List < ConfigSpec > { return ArrayList () } }","title":"Command extension"},{"location":"api/extension_development/#config-specs","text":"Ledger uses the Konf library for configuration. You can add your own config specs to Ledger's file if your extension needs it Create a config spec: object ExtensionSpec : ConfigSpec () { val myProperty by optional ( true ) val myRequiredProperty by required < Boolean > () } Add the relevant line to your config file: # Config file above [extension] myProperty = false myRequiredProperty = true You should make all properties optional unless your extension cannot function without a value. This is because existing config files will not have these values automatically added. Register your spec: override fun getConfigSpecs (): List < ConfigSpec > { return listOf ( ExtensionSpec ) }","title":"Config specs"},{"location":"api/using_the_database/","text":"Accessing the Ledger Database Ledger has a database with access to potentially hundreds of thousands or even millions of data points. This page describes how you can make use of our database in your own mods What about extensions? The database extension API is extremely simple - it is designed to allow other database types, not actually accessing the databse What language? While we would strongly recommend Kotlin, which grants you access to all of our database methods, removing the need for an API, it is possible to write using Java with our LedgerApi. Please see the Java section. Negatable parameters When searching the database, some parameters can be negative. Making the world parameter negative, for example, would show all results where the world is not the one specified. Kotlin With Kotlin, you can access our database from within the Ledger coroutine. object LedgerExamples { fun search ( targetWorld : ServerWorld ) { // We make a search parameters object showing results only in the world val params = ActionSearchParams . build { this . worlds = mutableSetOf ( Negatable . allow ( targetWorld . getRegistryKey (). getValue ())) } Ledger . launch { // Run the query and select actions on page 1 val results : SearchResults = DataaseManager . searchActions ( targetWorld ) // Store the actions of the current page in a variable val actions : List < ActionType > = results . actions } } fun insert ( world : World , player : PlayerEntity , pos : BlockPos , state : BlockState , context : ItemPlacementContext , entity : BlockEntity?) { // Create action object val action = ActionFactory . blockPlaceAction ( world , pos , state , player , entity ) Ledger . launch { // Insert action into the database DatabaseManager . logAction ( action ) } } } Java With Java, you can access our database with the API which can be obtained with Ledger.getApi() . You can see the API here . public class LedgerExamples { public SearchResults getSearchResults ( ServerWorld world ) { // Create parameters ActionSearchParams . Builder params = new ActionSearchParams . Builder (); Set < Negatable < Identifier >> worlds = new HashSet <> (); worlds . add ( Negatable . allow ( world . getRegistryKey (). getValue ())); params . setWorlds ( worlds ); // Run search CompletableFuture < SearchResults > future = Ledger . getApi (). searchActions ( params . build (), 0 ); // Blocks thread for result SearchResults results = future . get (); } public void insert ( World world , PlayerEntity player , BlockPos pos , BlockState state , ItemPlacementContext context , BlockEntity entity ) { // Create action ActionType action = ActionFactory . INSTANCE . blockPlaceAction ( world , pos , state , player , entity ); // Log the action Ledger . getApi (). logAction ( action ); } } Negatable Normal behaviour: Negatable.allow(object) Negative behaviour: Negatable.deny(object) ActionSearchParams This class is used for filtering searches. Kotlin Set the parameters when creating the ActionSearchParams.Builder object Java Use the setPropertyName method on the ActionSearchParams.Builder object Current params: min : BlockPos Forms one corner of the cubic block selection max : BlockPos Forms the other corner of the cubic block selection before : Instant Selects all actions which occurred before the specified point in time after : Instant Selects all actions which occurred after the specified point in time actions : MutableSet<Negatable<String>> A list of action types with OR filtering if not negative and AND filtering if negative objects : MutableSet<Negatable<Identifier>> A list of identifiers containing object names, such as minecraft:diamond_ore . Uses OR filtering if not negative and AND filtering if negative sourceNames : MutableSet<Negatable<String>> A list of non-player source names, such as tnt , with OR filtering if not negative and AND filtering if negative sourcePlayerNames : MutableSet<Negatable<String>> A list of player names to filter by. Uses OR filtering if not negative and AND filtering if negative worlds : MutableSet<Negatable<Identifier>> A list of world identifiers to filter by. Uses OR filtering if not negative and AND filtering if negative","title":"Accessing the Ledger Database"},{"location":"api/using_the_database/#accessing-the-ledger-database","text":"Ledger has a database with access to potentially hundreds of thousands or even millions of data points. This page describes how you can make use of our database in your own mods","title":"Accessing the Ledger Database"},{"location":"api/using_the_database/#what-about-extensions","text":"The database extension API is extremely simple - it is designed to allow other database types, not actually accessing the databse","title":"What about extensions?"},{"location":"api/using_the_database/#what-language","text":"While we would strongly recommend Kotlin, which grants you access to all of our database methods, removing the need for an API, it is possible to write using Java with our LedgerApi. Please see the Java section.","title":"What language?"},{"location":"api/using_the_database/#negatable-parameters","text":"When searching the database, some parameters can be negative. Making the world parameter negative, for example, would show all results where the world is not the one specified.","title":"Negatable parameters"},{"location":"api/using_the_database/#kotlin","text":"With Kotlin, you can access our database from within the Ledger coroutine. object LedgerExamples { fun search ( targetWorld : ServerWorld ) { // We make a search parameters object showing results only in the world val params = ActionSearchParams . build { this . worlds = mutableSetOf ( Negatable . allow ( targetWorld . getRegistryKey (). getValue ())) } Ledger . launch { // Run the query and select actions on page 1 val results : SearchResults = DataaseManager . searchActions ( targetWorld ) // Store the actions of the current page in a variable val actions : List < ActionType > = results . actions } } fun insert ( world : World , player : PlayerEntity , pos : BlockPos , state : BlockState , context : ItemPlacementContext , entity : BlockEntity?) { // Create action object val action = ActionFactory . blockPlaceAction ( world , pos , state , player , entity ) Ledger . launch { // Insert action into the database DatabaseManager . logAction ( action ) } } }","title":"Kotlin"},{"location":"api/using_the_database/#java","text":"With Java, you can access our database with the API which can be obtained with Ledger.getApi() . You can see the API here . public class LedgerExamples { public SearchResults getSearchResults ( ServerWorld world ) { // Create parameters ActionSearchParams . Builder params = new ActionSearchParams . Builder (); Set < Negatable < Identifier >> worlds = new HashSet <> (); worlds . add ( Negatable . allow ( world . getRegistryKey (). getValue ())); params . setWorlds ( worlds ); // Run search CompletableFuture < SearchResults > future = Ledger . getApi (). searchActions ( params . build (), 0 ); // Blocks thread for result SearchResults results = future . get (); } public void insert ( World world , PlayerEntity player , BlockPos pos , BlockState state , ItemPlacementContext context , BlockEntity entity ) { // Create action ActionType action = ActionFactory . INSTANCE . blockPlaceAction ( world , pos , state , player , entity ); // Log the action Ledger . getApi (). logAction ( action ); } }","title":"Java"},{"location":"api/using_the_database/#negatable","text":"Normal behaviour: Negatable.allow(object) Negative behaviour: Negatable.deny(object)","title":"Negatable"},{"location":"api/using_the_database/#actionsearchparams","text":"This class is used for filtering searches.","title":"ActionSearchParams"},{"location":"api/using_the_database/#kotlin_1","text":"Set the parameters when creating the ActionSearchParams.Builder object","title":"Kotlin"},{"location":"api/using_the_database/#java_1","text":"Use the setPropertyName method on the ActionSearchParams.Builder object Current params: min : BlockPos Forms one corner of the cubic block selection max : BlockPos Forms the other corner of the cubic block selection before : Instant Selects all actions which occurred before the specified point in time after : Instant Selects all actions which occurred after the specified point in time actions : MutableSet<Negatable<String>> A list of action types with OR filtering if not negative and AND filtering if negative objects : MutableSet<Negatable<Identifier>> A list of identifiers containing object names, such as minecraft:diamond_ore . Uses OR filtering if not negative and AND filtering if negative sourceNames : MutableSet<Negatable<String>> A list of non-player source names, such as tnt , with OR filtering if not negative and AND filtering if negative sourcePlayerNames : MutableSet<Negatable<String>> A list of player names to filter by. Uses OR filtering if not negative and AND filtering if negative worlds : MutableSet<Negatable<Identifier>> A list of world identifiers to filter by. Uses OR filtering if not negative and AND filtering if negative","title":"Java"},{"location":"commands/inspect/","text":"Inspect /ledger inspect Alias: i Permission: ledger.commands.inspect /ledger inspect <x> <y> <z> This command will inspect the logs at a specific location /ledger inspect This command toggles Inspect Mode for the player than ran it Inspect Mode Left click a block - Inspect the block clicked Right click a block - Inspect the block on the side clicked /ledger inspect on This command will toggle inspect mode on /ledger inspect off This command will toggle inspect mode off","title":"Inspect"},{"location":"commands/inspect/#inspect","text":"/ledger inspect Alias: i Permission: ledger.commands.inspect","title":"Inspect"},{"location":"commands/inspect/#ledger-inspect-x-y-z","text":"This command will inspect the logs at a specific location","title":"/ledger inspect &lt;x&gt; &lt;y&gt; &lt;z&gt;"},{"location":"commands/inspect/#ledger-inspect","text":"This command toggles Inspect Mode for the player than ran it Inspect Mode Left click a block - Inspect the block clicked Right click a block - Inspect the block on the side clicked","title":"/ledger inspect"},{"location":"commands/inspect/#ledger-inspect-on","text":"This command will toggle inspect mode on","title":"/ledger inspect on"},{"location":"commands/inspect/#ledger-inspect-off","text":"This command will toggle inspect mode off","title":"/ledger inspect off"},{"location":"commands/page/","text":"Page /ledger page Alias: pg Permission: None /ledger page <page> This command allows you to manually jump to a specific page instead of using the page buttons. This can allow you to quickly go to where you want.","title":"Page"},{"location":"commands/page/#page","text":"/ledger page Alias: pg Permission: None","title":"Page"},{"location":"commands/page/#ledger-page-page","text":"This command allows you to manually jump to a specific page instead of using the page buttons. This can allow you to quickly go to where you want.","title":"/ledger page &lt;page&gt;"},{"location":"commands/player/","text":"Player /ledger player Permission: ledger.commands.player Alias: pl /ledger player <profiles> This command searches for the name, first and last join of a player Example syntax for players /ledger player Potatoboy9999 Results <username>: First joined <first_join_time>. Last joined <last_join_time>","title":"Player"},{"location":"commands/player/#player","text":"/ledger player Permission: ledger.commands.player Alias: pl","title":"Player"},{"location":"commands/player/#ledger-player-profiles","text":"This command searches for the name, first and last join of a player","title":"/ledger player &lt;profiles&gt;"},{"location":"commands/player/#example-syntax-for-players","text":"/ledger player Potatoboy9999","title":"Example syntax for players"},{"location":"commands/player/#results","text":"<username>: First joined <first_join_time>. Last joined <last_join_time>","title":"Results"},{"location":"commands/preview/","text":"Preview /ledger preview Alias: pv Permission: ledger.commands.preview /ledger preview rollback <params> This command will find all actions that match the parameters that haven't already been rolled back. It will then send a preview of what the world would look like with all the selected actions undone. This is much safer than using the raw rollback command and is highly recommended over it. Supported Previews Block /ledger preview restore <params> Similar to /ledger preview rollback , this command will find all actions that match the parameters that have already been rolled back. It will then send a preview of what the world would look like with all the selected actions re-applied. This is much safer than using the raw preview command and is highly recommended over it. Supported Previews Block /ledger preview apply This will apply your current preview to the world if you have one. /ledger preview cancel This will cancel your current preview if you have one.","title":"Preview"},{"location":"commands/preview/#preview","text":"/ledger preview Alias: pv Permission: ledger.commands.preview","title":"Preview"},{"location":"commands/preview/#ledger-preview-rollback-params","text":"This command will find all actions that match the parameters that haven't already been rolled back. It will then send a preview of what the world would look like with all the selected actions undone. This is much safer than using the raw rollback command and is highly recommended over it. Supported Previews Block","title":"/ledger preview rollback &lt;params&gt;"},{"location":"commands/preview/#ledger-preview-restore-params","text":"Similar to /ledger preview rollback , this command will find all actions that match the parameters that have already been rolled back. It will then send a preview of what the world would look like with all the selected actions re-applied. This is much safer than using the raw preview command and is highly recommended over it. Supported Previews Block","title":"/ledger preview restore &lt;params&gt;"},{"location":"commands/preview/#ledger-preview-apply","text":"This will apply your current preview to the world if you have one.","title":"/ledger preview apply"},{"location":"commands/preview/#ledger-preview-cancel","text":"This will cancel your current preview if you have one.","title":"/ledger preview cancel"},{"location":"commands/purge/","text":"Purge /ledger purge Permission: ledger.commands.purge /ledger purge <params> This command will remove all entries from the database which fit the parameters specified. See parameters","title":"Purge"},{"location":"commands/purge/#purge","text":"/ledger purge Permission: ledger.commands.purge","title":"Purge"},{"location":"commands/purge/#ledger-purge-params","text":"This command will remove all entries from the database which fit the parameters specified. See parameters","title":"/ledger purge &lt;params&gt;"},{"location":"commands/restore/","text":"Restore /ledger restore Alias: None Permission: ledger.commands.rollback /ledger restore <params> This command will find all actions that match the parameters that have already been rolled back. It will then undo all possible selected actions. Basically, it undoes rollbacks . It is highly recommended to use the preview command instead to make sure you are doing what you want. Supported Restores Block Item Entity","title":"Restore"},{"location":"commands/restore/#restore","text":"/ledger restore Alias: None Permission: ledger.commands.rollback","title":"Restore"},{"location":"commands/restore/#ledger-restore-params","text":"This command will find all actions that match the parameters that have already been rolled back. It will then undo all possible selected actions. Basically, it undoes rollbacks . It is highly recommended to use the preview command instead to make sure you are doing what you want. Supported Restores Block Item Entity","title":"/ledger restore &lt;params&gt;"},{"location":"commands/rollback/","text":"Rollback /ledger rollback Alias: rb Permission: ledger.commands.rollback /ledger rollback <params> This command will find all actions that match the parameters that haven't already been rolled back. It will then undo all possible selected actions. To reverse a rollback, use the restore command . It is highly recommended to use the preview command instead to make sure you are doing what you want. Supported Rollbacks Block Item Entity","title":"Rollback"},{"location":"commands/rollback/#rollback","text":"/ledger rollback Alias: rb Permission: ledger.commands.rollback","title":"Rollback"},{"location":"commands/rollback/#ledger-rollback-params","text":"This command will find all actions that match the parameters that haven't already been rolled back. It will then undo all possible selected actions. To reverse a rollback, use the restore command . It is highly recommended to use the preview command instead to make sure you are doing what you want. Supported Rollbacks Block Item Entity","title":"/ledger rollback &lt;params&gt;"},{"location":"commands/root/","text":"Root /ledger Alias: lg Permission: ledger.commands.root This is the central command to ledger that grants access to all other commands.","title":"Root"},{"location":"commands/root/#root","text":"/ledger Alias: lg Permission: ledger.commands.root This is the central command to ledger that grants access to all other commands.","title":"Root"},{"location":"commands/search/","text":"Search /ledger search Alias: s Permission: ledger.commands.search /ledger search <params> Often, inspecting just one position is not what you want. The search command allows you to preform advanced queries on the database. To refine your search, use search parameters . After executing your search, you will see all the results and can paginate between them if needed. Display: Time ago Source of the action Action that occurred Object that was changed Location Hover: Exact time Action identifier Object identifier Teleport on click Order can be customized, see configuration","title":"Search"},{"location":"commands/search/#search","text":"/ledger search Alias: s Permission: ledger.commands.search","title":"Search"},{"location":"commands/search/#ledger-search-params","text":"Often, inspecting just one position is not what you want. The search command allows you to preform advanced queries on the database. To refine your search, use search parameters . After executing your search, you will see all the results and can paginate between them if needed. Display: Time ago Source of the action Action that occurred Object that was changed Location Hover: Exact time Action identifier Object identifier Teleport on click Order can be customized, see configuration","title":"/ledger search &lt;params&gt;"},{"location":"commands/status/","text":"Status /ledger status Alias: None Permission: ledger.commands.status /ledger status This command will give you the following information. Info Explanation Version The current version of Ledger on your server Queue Status Whether or not the queue is free or busy . Discord A link to the Fabric Server Tools discord for support Wiki A link to the wiki","title":"Status"},{"location":"commands/status/#status","text":"/ledger status Alias: None Permission: ledger.commands.status","title":"Status"},{"location":"commands/status/#ledger-status","text":"This command will give you the following information. Info Explanation Version The current version of Ledger on your server Queue Status Whether or not the queue is free or busy . Discord A link to the Fabric Server Tools discord for support Wiki A link to the wiki","title":"/ledger status"},{"location":"commands/teleport/","text":"Teleport /ledger tp Alias: None Permission: ledger.commands.tp /ledger tp <world> <x> <y> <z> This command allows players to teleport to a specific location in a world. This is mainly used internally for teleporting to locations in search results.","title":"Teleport"},{"location":"commands/teleport/#teleport","text":"/ledger tp Alias: None Permission: ledger.commands.tp","title":"Teleport"},{"location":"commands/teleport/#ledger-tp-world-x-y-z","text":"This command allows players to teleport to a specific location in a world. This is mainly used internally for teleporting to locations in search results.","title":"/ledger tp &lt;world&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt;"},{"location":"extensions/extensions/","text":"Extensions Ledger extensions allow for additional functionality to be added to Ledger via another mod Install Install Ledger Install the extension of your choice in your mods folder Run your server and adjust the config as needed. The extension should provide information on how to configure it Available extensions Ledger Databases - Adds support for MySQL and H2 Features possible via extensions Changing the type of database used by Ledger Adding custom commands Adding configuration options to the existing config file","title":"Extensions"},{"location":"extensions/extensions/#extensions","text":"Ledger extensions allow for additional functionality to be added to Ledger via another mod","title":"Extensions"},{"location":"extensions/extensions/#install","text":"Install Ledger Install the extension of your choice in your mods folder Run your server and adjust the config as needed. The extension should provide information on how to configure it","title":"Install"},{"location":"extensions/extensions/#available-extensions","text":"Ledger Databases - Adds support for MySQL and H2","title":"Available extensions"},{"location":"extensions/extensions/#features-possible-via-extensions","text":"Changing the type of database used by Ledger Adding custom commands Adding configuration options to the existing config file","title":"Features possible via extensions"}]}